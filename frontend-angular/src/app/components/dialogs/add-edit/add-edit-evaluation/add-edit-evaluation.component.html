<div>
  <h1 mat-dialog-title>{{((evaluationOrGoalId|type:'object')?'Edit evaluation':'Add new evaluation')|translate}}</h1>
  <form [formGroup]="formGroup" class="container-fluid" (submit)="submit($event)">
    <div mat-dialog-content>
      <div class="row">
        <div class="col-md-12">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>{{'Description of how performed the goal'|translate}}</mat-label>
            <mat-icon matPrefix class="material-symbols-rounded">notes</mat-icon>
            <textarea type="text" matInput placeholder="..." formControlName="description" maxlength="512"></textarea>
            <mat-hint align="end">{{formGroup.get('description')?.value?.length??0}}/500</mat-hint>
            <mat-error *ngIf="formGroup.get('description')?.errors?.['required']">
              {{'You must enter a value'|translate}}
            </mat-error>
            <mat-error *ngIf="formGroup.getError('minlength','description') as err">
              {{'Minimum length is '|translate}}{{err.requiredLength}}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-12">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>{{'Note'|translate}}</mat-label>
            <mat-icon matPrefix class="material-symbols-rounded">notes</mat-icon>
            <textarea type="text" matInput placeholder="..." formControlName="note" maxlength="512"></textarea>
            <mat-hint align="end">{{formGroup.get('note')?.value?.length??0}}/500</mat-hint>
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-12">
          <mat-form-field class="w-100" appearance="fill">
            <mat-label>{{'Mainstream'|translate}}</mat-label>
            <mat-icon matPrefix class="material-symbols-rounded">notes</mat-icon>
            <textarea type="text" matInput placeholder="..." formControlName="mainstream" maxlength="512"></textarea>
            <mat-hint align="end">{{formGroup.get('mainstream')?.value?.length??0}}/500</mat-hint>
          </mat-form-field>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-12 mb-3">
          <mat-label>{{'Rate'|translate}}</mat-label>
          <mat-button-toggle-group formControlName="rate" class="w-100" aria-label="Evaluate rate">
            <mat-button-toggle class="w-50" value="continual">{{'Continual'|translate}}</mat-button-toggle>
            <mat-button-toggle class="w-50" value="excellent">{{'Excellent'|translate}}</mat-button-toggle>
          </mat-button-toggle-group>
        </div>
      </div>

      <div class="row mt-2">
        <div class="col-md-12">
          <app-datepicker label="Evaluate date" [min]="formService.minCreatedDate$|async"
          [max]="formService.nowDate$|async" controlName="evaluationDatetime"
          [formGroup]="formGroup"></app-datepicker>
        </div>
      </div>
    </div>

    <div mat-dialog-actions>
      <button type="button" mat-button (click)="dialogRef.close()" color="accent"
        cdkFocusInitial>{{'Cancel'|translate}}</button>
      <button type="submit" mat-button color="primary">
        <mat-icon>{{(evaluationOrGoalId|type:'object')?'edit':'rate_review'}}</mat-icon>
        {{((evaluationOrGoalId|type:'object')?'Edit':'Evaluate')|translate}}
      </button>
    </div>
  </form>
</div>