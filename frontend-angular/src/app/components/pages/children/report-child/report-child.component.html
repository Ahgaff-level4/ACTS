<div class="container">
  <div class="d-flex justify-content-between align-items-end">
    <app-title [links]="[{title:'Child Report'},{title:'Children',link:'/children'}]" [isPrinting]="isPrinting"></app-title>
    <button *ngIf="!isPrinting" (click)="printHandle()" class="mx-1 mx-md-5 rounded-5" mat-stroked-button
      color="primary"><mat-icon>print</mat-icon>{{'Print'|translate}}</button>
  </div>
  <ng-container *ngIf="childReport$ |async as childReport">
    <p class="fw-normal text-center mx-md-5  fs-6">
      {{nowDatetime}}
    </p>
    <h4 class="my-4 p-4 mt-0 pt-0 mb-0 pb-0 fw-normal">{{'Personal information'|translate}}</h4>
    <mat-card class="my-4 shadow d-flex rounded-5">
      <mat-card-content>
        <app-child-info [isPrinting]="isPrinting" [child]="childReport.child"></app-child-info>
      </mat-card-content>
    </mat-card>
  </ng-container>

  <h4 class="my-4 mb-0 p-4 pb-0 fw-normal">{{'Goals state'|translate}}</h4>
  <mat-card class="my-4 shadow d-flex rounded-5">
    <div class="mt-3 align-self-start px-3 w-100">
      <mat-form-field class="timeframe" appearance="outline">
        <mat-label>{{'Timeframe'|translate}}</mat-label>
        <mat-date-range-input [formGroup]="customTimeframeForm" [rangePicker]="picker9">
          <input [value]="customTimeframeForm.controls.from.value" formControlName="from" matStartDate [placeholder]="'From'|translate">
          <input [value]="customTimeframeForm.controls.to.value" formControlName="to" matEndDate [placeholder]="'To'|translate">
        </mat-date-range-input>
        <mat-datepicker-toggle matIconSuffix [for]="picker9"></mat-datepicker-toggle>
        <mat-date-range-picker #picker9>
          <mat-date-range-picker-actions>
            <button mat-button matDateRangePickerCancel color="accent">{{'Cancel'|translate}}</button>
            <button mat-raised-button color="primary" matDateRangePickerApply>{{'Apply'|translate}}</button>
          </mat-date-range-picker-actions>
        </mat-date-range-picker>
        <mat-error *ngIf="customTimeframeForm.controls.from.hasError('matStartDateInvalid')">{{'Invalid start date'|translate}}</mat-error>
        <mat-error *ngIf="customTimeframeForm.controls.to.hasError('matEndDateInvalid')">{{'Invalid end date'|translate}}</mat-error>
      </mat-form-field>
    </div>
    <mat-card-content dir="ltr" class="ms-md-5 mb-md-3">
      <ngx-charts-advanced-pie-chart [view]="[0,200]" [results]="goalsStatePieData$|async" [gradient]="true"
        [label]="'Total'|translate">
      </ngx-charts-advanced-pie-chart>
    </mat-card-content>
  </mat-card>

  <h4 class="my-4 mb-0 p-4 pb-0 fw-normal">{{'Activities fields'|translate}}</h4>
  <mat-card class="my-4 shadow d-flex rounded-5">
    <div class="mt-3 align-self-start px-3 w-100">
      <mat-form-field class="timeframe" appearance="outline">
        <mat-label>{{'Timeframe'|translate}}</mat-label>
        <mat-date-range-input [formGroup]="customTimeframeForm" [rangePicker]="picker10">
          <input [value]="customTimeframeForm.controls.from.value" formControlName="from" matStartDate [placeholder]="'From'|translate">
          <input [value]="customTimeframeForm.controls.to.value" formControlName="to" matEndDate [placeholder]="'To'|translate">
        </mat-date-range-input>
        <mat-datepicker-toggle matIconSuffix [for]="picker10"></mat-datepicker-toggle>
        <mat-date-range-picker #picker10>
          <mat-date-range-picker-actions>
            <button mat-button matDateRangePickerCancel color="accent">{{'Cancel'|translate}}</button>
            <button mat-raised-button color="primary" matDateRangePickerApply>{{'Apply'|translate}}</button>
          </mat-date-range-picker-actions>
        </mat-date-range-picker>
        <mat-error *ngIf="customTimeframeForm.controls.from.hasError('matStartDateInvalid')">{{'Invalid start date'|translate}}</mat-error>
        <mat-error *ngIf="customTimeframeForm.controls.to.hasError('matEndDateInvalid')">{{'Invalid end date'|translate}}</mat-error>
      </mat-form-field>
    </div>
    <mat-card-content dir="ltr" style="min-height: 400px;" class="me-4 mb-md-3">
      <ngx-charts-polar-chart
      [legend]="true"
      [animations]="true"
      [showGridLines]="true"
      [roundDomains]="false"
      [gradient]="true"
      [yAxisTickFormatting]="stringify"
      [legendTitle]="'Activities types'|translate"
      [showXAxisLabel]="true"
      [showYAxisLabel]="true"
      [xAxisLabel]="'Fields'|translate"
      [yAxisLabel]="'Number of Activities'|translate"
      [xAxis]="true"
      [yAxis]="true"
      [results]="activitiesFieldsPolar$|async">
    </ngx-charts-polar-chart>
    </mat-card-content>
  </mat-card>
</div>