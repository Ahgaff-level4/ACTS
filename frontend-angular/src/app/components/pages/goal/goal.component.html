<app-title header="Goals"
  [links]="[{title:'Goals of',param:service.childItsGoals$.value?.person?.name},{title:'Children',link:'/children'},]"
  [isPrinting]="isPrinting"></app-title>
<div class="container">
  <app-search-export [isPrinting]="isPrinting" [gridOptions]="gridOptions" (keyup)="applySearch($event)"
    (print)="printTable()"></app-search-export>

  <div class="mat-elevation-z4 table-responsive mb-4 rounded-4">
    <!-- AG Grid Angular Component -->
    <ag-grid-angular style="width: 100%;" class="ag-theme-material rtl" [gridOptions]="gridOptions"
      [rowData]="(service.childItsGoals$|async)?.goals" domLayout='autoHeight'
      [quickFilterText]="quickFilter"></ag-grid-angular>
  </div>

  <app-table-controllers *ngIf="!isPrinting" [button1]="{show:this.pr.canUser('addGoal'),text:'Add new goal',icon:'add'}"
    (button1Click)="addEdit(service.childItsGoals$.value?.id)"
    [button2]="{show:this.pr.canUser('addEvaluation'),disabled:selectedItem==null,tooltip:'Evaluate the selected goal',text:'Evaluate',icon:'rate_review'}"
    (button2Click)="evaluate(selectedItem!.id)"
    [anchor3]="{show:this.pr.canUser('goalEvaluationsPage'),link:selectedItem&&service.childItsGoals$.value?'/child/'+service.childItsGoals$.value.id+'/goal/'+selectedItem.id+'/evaluations':'./',disabled:selectedItem==null,tooltip:'View evaluations of the selected goal',icon:'reviews',text:'Evaluations'}"
    [button4]="{show:this.pr.canUser('editGoal'),disabled:selectedItem==null,icon:'edit',text:'Edit',tooltip:'Edit the selected row',}"
    (button4Click)="addEdit(this.selectedItem)"
    [button5]="{show:this.pr.canUser('deleteGoal'),disabled:selectedItem==null,tooltip:'Delete the selected goal',icon:'delete',text:'Delete',color:'warn'}"
    (button5Click)="deleteDialog(this.selectedItem)"></app-table-controllers>
</div>