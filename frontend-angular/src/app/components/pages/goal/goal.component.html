<h1 class="pt-4 mx-md-5 pb-0">{{'Goals'|translate}}</h1>
<h5 class="fw-normal mx-md-5 pb-4">
  {{'Goals of'|translate}}:&nbsp;{{childItsGoals?.person?.name}}
</h5>
<div class="mx-md-5 mb-5 pb-5">
  <div class="w-100 row" *ngIf="!isPrinting">
    <mat-form-field class="col-md-11">
      <mat-label>{{'Search'|translate}}</mat-label>
      <input matInput (keyup)="applySearch($event)" placeholder="..." #input>
    </mat-form-field>
    <div class="col-1">
      <button mat-icon-button [matMenuTriggerFor]="exportMenu" [matTooltip]="'Export table'|translate"
        aria-label="Export button with a menu">
        <mat-icon color="primary">ios_share</mat-icon>
      </button>
      <mat-menu #exportMenu="matMenu">
        <button mat-menu-item (click)="agGrid.exportCSV(gridOptions.api)">
          <mat-icon color="primary">download</mat-icon>
          <span>{{'Export as CSV'|translate}}</span>
        </button>
        <button mat-menu-item (click)="agGrid.exportExcel(gridOptions.api)">
          <mat-icon color="primary">download</mat-icon>
          <span>{{'Export as Excel'|translate}}</span>
        </button>
        <button mat-menu-item (click)="this.printTable()">
          <mat-icon color="primary">print</mat-icon>
          <span>{{'Print'|translate}}</span>
        </button>
        <button mat-menu-item (click)="agGrid.exportClipboard(gridOptions.api,false)">
          <mat-icon color="primary">content_copy</mat-icon>
          <span>{{'Copy table'|translate}}</span>
        </button>
        <button mat-menu-item (click)="agGrid.exportClipboard(gridOptions.api,false)">
          <mat-icon color="primary">table_view</mat-icon>
          <span>{{'Copy table (with headers)'|translate}}</span>
        </button>
      </mat-menu>
    </div>
  </div>
  <div class="mat-elevation-z4 table-responsive mb-4 rounded-4">
    <!-- AG Grid Angular Component -->
    <ag-grid-angular style="width: 100%;" class="ag-theme-material rtl" [gridOptions]="gridOptions" [rowData]="childItsGoals?.goals"
      domLayout='autoHeight' [quickFilterText]="quickFilter"></ag-grid-angular>
  </div>
  <div class="d-md-flex justify-content-between" *ngIf="!isPrinting">
    <button *ngIf="canAdd" class="w-100 mx-3 mb-2 rounded-5" mat-raised-button color="primary"
    (click)="addEdit(childItsGoals?.id)">
      {{'Add new goal'|translate}}<mat-icon>add</mat-icon>
    </button>
    <button *ngIf="canAdd" class="w-100 mx-3 mb-2 rounded-5" [disabled]="selectedItem==null"
    [matTooltip]="'Evaluate the selected goal'|translate"
    (click)="evaluate(selectedItem!.id)" mat-stroked-button color="primary">
    {{'Evaluate'|translate}}<mat-icon>rate_review</mat-icon>
  </button>
  <a [routerLink]="selectedItem?'/goal/'+selectedItem.id+'/evaluations':'#'" [disabled]="selectedItem==null"
  [matTooltip]="'View evaluations of the selected goal'|translate" mat-stroked-button
  color="primary" class="w-100 mx-3 mb-2 rounded-5">
    <mat-icon>reviews</mat-icon>
    <span>{{'Evaluations'|translate}}</span>
  </a>
  <button *ngIf="canEditDelete" [disabled]="selectedItem==null" [matTooltip]="'Edit the selected row'|translate"
    class="w-100 mx-3 mb-2 rounded-5" mat-stroked-button color="primary" (click)="addEdit(this.selectedItem)">
    <mat-icon>edit</mat-icon>{{'Edit'|translate}}
  </button>
  <button *ngIf="canEditDelete" [disabled]="selectedItem==null" [matTooltip]="'Delete the selected goal'|translate"
    class="w-100 mx-3 mb-2 rounded-5" mat-stroked-button color="warn" (click)="deleteDialog(this.selectedItem)">
    <mat-icon>delete</mat-icon>{{'Delete'|translate}}
  </button>
  </div>
</div>
